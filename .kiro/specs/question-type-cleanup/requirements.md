# Requirements Document

## Project Description (Input)
質問管理機能修正
・質問タイプ「評価」「評価（5段階）」「評価（10段階）」は不要
・質問タイプ「スケール」の最小値デフォルト1、最大値デフォルト5とする。
・質問作成時の質問タイププルダウンに「はい/いいえ」が２つある。１つでよい。
・質問タイプ「スケール」で作成した質問が、質問管理画面上では「評価（10段階）」と表示される。

## イントロダクション

質問管理機能における質問タイプの整理と修正を行います。本修正では、不要な質問タイプの削除、デフォルト値の設定、UI上の重複表示の解消、および表示名の統一を目的としています。これにより、HR担当者が調査を作成する際の混乱を防ぎ、より直感的な質問管理を実現します。

## 要件

### 要件1: 不要な質問タイプの削除
**目的:** HR担当者として、不要な質問タイプが選択肢に表示されないようにし、質問作成時の混乱を避けたい

#### 受け入れ基準

1. WHEN HR担当者が質問管理画面の質問タイププルダウンを開いた時 THEN 質問管理システムは「評価」「評価（5段階）」「評価（10段階）」を選択肢から除外しなければならない
2. WHEN HR担当者が質問作成モーダルの質問タイププルダウンを開いた時 THEN 質問管理システムは「評価」「評価（5段階）」「評価（10段階）」を選択肢から除外しなければならない
3. IF データベースに「rating」「rating_5」「rating_10」タイプの既存質問が存在する場合 THEN 質問管理システムはそれらの質問を引き続き表示し編集可能にしなければならない
4. WHEN バックエンドAPIが質問タイプのバリデーションを実行する時 THEN システムは「rating」「rating_5」「rating_10」を無効なタイプとして扱わなければならない

### 要件2: スケールタイプのデフォルト値設定
**目的:** HR担当者として、スケール質問を作成する際に適切なデフォルト値が自動設定され、効率的に質問を作成したい

#### 受け入れ基準

1. WHEN HR担当者が質問タイプとして「スケール」を選択した時 THEN 質問管理システムは最小値フィールドにデフォルト値「1」を自動設定しなければならない
2. WHEN HR担当者が質問タイプとして「スケール」を選択した時 THEN 質問管理システムは最大値フィールドにデフォルト値「5」を自動設定しなければならない
3. IF HR担当者がデフォルト値を変更した場合 THEN 質問管理システムは変更後の値を保持しなければならない
4. WHEN スケール質問が保存される時 THEN 質問管理システムは最小値が最大値より小さいことを検証しなければならない

### 要件3: はい/いいえプルダウンの重複削除
**目的:** HR担当者として、質問タイプのプルダウンで「はい/いいえ」が重複表示されないようにし、正確な選択を行いたい

#### 受け入れ基準

1. WHEN HR担当者が質問タイププルダウンを開いた時 THEN 質問管理システムは「はい/いいえ」タイプを1つのみ表示しなければならない
2. IF フロントエンドで「yes_no」と「boolean」の両方が定義されている場合 THEN 質問管理システムは内部的に両方をサポートしつつUIでは統一した名称で1つのみ表示しなければならない
3. WHEN HR担当者が「はい/いいえ」タイプを選択して質問を作成した時 THEN 質問管理システムは一貫した内部タイプ値（「yes_no」または「boolean」）で保存しなければならない

### 要件4: スケールタイプの表示名修正
**目的:** HR担当者として、スケールタイプで作成した質問が質問管理画面で正しく「スケール」と表示され、混乱を避けたい

#### 受け入れ基準

1. WHEN 質問管理画面で「scale」タイプの質問が表示される時 THEN 質問管理システムは質問タイプを「スケール」と表示しなければならない
2. WHEN 質問管理画面で「scale」タイプの質問が表示される時 THEN 質問管理システムは質問タイプを「評価（10段階）」と誤って表示してはならない
3. IF 質問タイプのラベルマッピングが複数箇所に定義されている場合 THEN 質問管理システムは全ての箇所で一貫した表示名を使用しなければならない
4. WHEN 質問割り当て画面で「scale」タイプの質問が表示される時 THEN 質問管理システムは質問タイプを「スケール」と表示しなければならない

### 要件5: 後方互換性の保持
**目的:** システム管理者として、既存データとの互換性を保ちながら修正を適用し、データ損失やシステム障害を防ぎたい

#### 受け入れ基準

1. IF データベースに「rating」「rating_5」「rating_10」タイプの既存質問が存在する場合 THEN 質問管理システムはそれらを削除せず保持しなければならない
2. WHEN 既存の「rating」「rating_5」「rating_10」質問が質問管理画面に表示される時 THEN 質問管理システムは適切なラベルで表示しなければならない
3. IF 従業員が過去の調査で「rating」「rating_5」「rating_10」質問に回答した場合 THEN 質問管理システムはその回答データを保持し続けなければならない
4. WHEN バックエンドAPIが質問タイプのバリデーションを実行する時 THEN システムは削除された質問タイプでの新規作成のみを禁止し既存データの読み取りは許可しなければならない
